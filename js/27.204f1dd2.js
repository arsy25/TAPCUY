"use strict";(globalThis["webpackChunkdo_it"]=globalThis["webpackChunkdo_it"]||[]).push([[27],{2027:(e,a,s)=>{s.r(a),s.d(a,{default:()=>P});var t=s(1758),l=s(9104);const o={key:0},r={class:""},d={class:"q-pl-sm"},n={class:"items-start row"},i={class:"items-start q-pa-sm"},m={key:1},u={class:""},p={class:"q-pl-sm"},c={class:"text"},b={class:"items-start row"},f={class:"q-pl-sm"},h={class:"items-start row"},g={class:"items-start q-pa-sm"};function k(e,a,s,k,q,y){const w=(0,t.g2)("q-card"),x=(0,t.g2)("q-badge"),v=(0,t.g2)("q-icon"),F=(0,t.g2)("q-input"),_=(0,t.g2)("q-select"),V=(0,t.g2)("q-separator"),z=(0,t.g2)("q-btn"),L=(0,t.g2)("q-form"),R=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.CE)(t.FK,null,[a[23]||(a[23]=(0,t.Lk)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"},null,-1)),e.$q.platform.is.desktop?((0,t.uX)(),(0,t.CE)("div",o,[(0,t.bF)(R,{class:"q-pa-md bg-white"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(w,{class:"q-pa-md no-shadow q-mb-md cardd",bordered:""},{default:(0,t.k6)((()=>a[16]||(a[16]=[(0,t.Lk)("p",{class:"text-weight-bold texttitle text text-h6 text-black"}," Add Users ",-1),(0,t.Lk)("p",{class:"text-weight-bold text-caption text-grey-5 text"}," Add new users easily from here. ",-1)]))),_:1}),(0,t.Lk)("div",null,[(0,t.bF)(w,{class:"q-pa-md no-shadow q-mb-md cardd",bordered:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",r,[(0,t.bF)(L,{onReset:y.resetField,onSubmit:(0,l.D$)(y.onSubmit,["prevent"]),class:"q-gutter-md q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",d,[(0,t.bF)(x,{class:"text-caption text-grey-5 q-ma-none"},{default:(0,t.k6)((()=>a[17]||(a[17]=[(0,t.eW)(" User Information ")]))),_:1})]),(0,t.Lk)("div",n,[(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.uid_rfid,"onUpdate:modelValue":a[0]||(a[0]=e=>q.form.uid_rfid=e),label:"UID RFID",class:"col-6 q-pa-sm",dense:"",rules:q.defaultRules,"lazy-rules":""},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"badge",class:"q-pr-md"})])),_:1},8,["modelValue","rules"]),(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.nama,"onUpdate:modelValue":a[1]||(a[1]=e=>q.form.nama=e),label:"Nama",class:"col-6 q-pa-sm text-capitalize",dense:"",rules:q.defaultRules,"lazy-rules":""},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"person",class:"q-pr-md"})])),_:1},8,["modelValue","rules"]),(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.npm,"onUpdate:modelValue":a[2]||(a[2]=e=>q.form.npm=e),label:"NPM",class:"col-6 q-pa-sm",dense:"",rules:q.defaultRules,"lazy-rules":""},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"qr_code",class:"q-pr-md"})])),_:1},8,["modelValue","rules"]),(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.jabatan,"onUpdate:modelValue":a[3]||(a[3]=e=>q.form.jabatan=e),label:"Jabatan",class:"col-6 q-pa-sm",dense:"",rules:q.defaultRules,"lazy-rules":""},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"work",class:"q-pr-md"})])),_:1},8,["modelValue","rules"]),(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.username,"onUpdate:modelValue":a[4]||(a[4]=e=>q.form.username=e),label:"Username",class:"col-6 q-pa-sm",dense:"",rules:q.defaultRules,"lazy-rules":""},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"account_circle",class:"q-pr-md"})])),_:1},8,["modelValue","rules"]),(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.password,"onUpdate:modelValue":a[6]||(a[6]=e=>q.form.password=e),label:"Password",class:"col-6 q-pa-sm",dense:"",type:q.showPassword?"text":"password",rules:q.defaultRules,autocomplete:"new-password","lazy-rules":""},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"lock",class:"q-pr-md"})])),append:(0,t.k6)((()=>[(0,t.bF)(v,{name:q.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:a[5]||(a[5]=e=>q.showPassword=!q.showPassword)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,t.bF)(_,{standout:"text-primary",modelValue:q.form.device_id,"onUpdate:modelValue":a[7]||(a[7]=e=>q.form.device_id=e),options:q.deviceOptions,"option-label":"nama_device","option-value":"id",class:"col-6 q-pa-sm",label:"Device",dense:"",clearable:"","map-options":"","emit-value":"",rules:q.defaultRules,"lazy-rules":""},null,8,["modelValue","options","rules"]),(0,t.bF)(_,{standout:"text-primary",modelValue:q.form.instansi_id,"onUpdate:modelValue":a[8]||(a[8]=e=>q.form.instansi_id=e),options:q.instansiOptions,"option-label":"nama_instansi","option-value":"id",class:"col-6 q-pa-sm",label:"Instansi",dense:"",clearable:"","map-options":"","emit-value":"",rules:q.defaultRules,"lazy-rules":""},null,8,["modelValue","options","rules"])]),(0,t.bF)(V,{class:"q-my-md",color:"grey-3"}),(0,t.Lk)("div",i,[(0,t.bF)(z,{type:"submit",dense:"",flat:"",class:"text text-capitalize q-px-lg bg-primary text-white"},{default:(0,t.k6)((()=>a[18]||(a[18]=[(0,t.eW)("Tambah Data")]))),_:1})])])),_:1},8,["onReset","onSubmit"])])])),_:1})])])])),_:1})])):((0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(R,{class:"q-pa-md bg-white"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",null,[(0,t.bF)(w,{class:"q-pa-md no-shadow q-mb-md cardd",bordered:""},{default:(0,t.k6)((()=>a[19]||(a[19]=[(0,t.Lk)("p",{class:"text-weight-bold texttitle text text-h6 text-black"}," Add Users ",-1),(0,t.Lk)("p",{class:"text-weight-bold text-caption text-grey-5 text"}," Add new users easily from here. ",-1)]))),_:1}),(0,t.Lk)("div",null,[(0,t.bF)(w,{class:"q-pa-md no-shadow q-mb-md cardd",bordered:""},{default:(0,t.k6)((()=>[(0,t.Lk)("div",u,[(0,t.bF)(L,{onReset:a[14]||(a[14]=e=>y.resetField()),onSubmit:a[15]||(a[15]=e=>y.onSubmit()),class:"q-gutter-md q-mt-sm"},{default:(0,t.k6)((()=>[(0,t.Lk)("div",p,[(0,t.bF)(x,{class:"text-caption text-grey-5 q-ma-none"},{default:(0,t.k6)((()=>a[20]||(a[20]=[(0,t.eW)(" User Information ")]))),_:1})]),(0,t.Lk)("div",c,[(0,t.Lk)("div",b,[(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.name,"onUpdate:modelValue":a[9]||(a[9]=e=>q.form.name=e),class:"col-12 q-pa-sm text-capitalize",label:"Name",dense:"","lazy-rules":"",rules:q.defaultRules},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"account_circle",class:"q-pr-md"})])),_:1},8,["modelValue","rules"]),(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.email,"onUpdate:modelValue":a[10]||(a[10]=e=>q.form.email=e),class:"col-12 q-pa-sm",label:"Email",dense:"","lazy-rules":"",rules:q.defaultRules},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"mail",class:"q-pr-md"})])),_:1},8,["modelValue","rules"]),(0,t.bF)(F,{standout:"text-primary",modelValue:q.form.password,"onUpdate:modelValue":a[12]||(a[12]=e=>q.form.password=e),class:"col-12 q-pa-sm",label:"Password",dense:"","lazy-rules":"",type:q.showPassword?"text":"password",rules:q.defaultRules},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"lock",class:"q-pr-md"})])),append:(0,t.k6)((()=>[(0,t.bF)(v,{name:q.showPassword?"visibility":"visibility_off",class:"cursor-pointer",onClick:a[11]||(a[11]=e=>q.showPassword=!q.showPassword)},null,8,["name"])])),_:1},8,["modelValue","type","rules"])])]),(0,t.Lk)("div",f,[(0,t.bF)(x,{class:"text-caption text-grey-5 q-ma-none"},{default:(0,t.k6)((()=>a[21]||(a[21]=[(0,t.eW)(" Authority ")]))),_:1})]),(0,t.Lk)("div",h,[(0,t.bF)(_,{standout:"text-primary",modelValue:q.form.role,"onUpdate:modelValue":a[13]||(a[13]=e=>q.form.role=e),class:"col-12 q-pa-sm text-capitalize",label:"Role",dense:"","emit-value":"","map-options":"",options:e.roleOptions,"lazy-rules":"",rules:[e=>!!e||"Role is required"]},{prepend:(0,t.k6)((()=>[(0,t.bF)(v,{name:"person",class:"q-pr-md"})])),_:1},8,["modelValue","options","rules"])]),(0,t.bF)(V,{class:"q-my-md",color:"grey-3"}),(0,t.Lk)("div",g,[(0,t.bF)(z,{type:"submit",dense:"",flat:"",class:"text text-capitalize q-px-lg bg-primary text-white"},{default:(0,t.k6)((()=>a[22]||(a[22]=[(0,t.eW)("Add Data")]))),_:1})])])),_:1})])])),_:1})])])])),_:1})]))],64)}s(989);const q={data(){return{form:{uid_rfid:"",nama:"",npm:"",jabatan:"",device_id:null,instansi_id:null,username:"",password:""},showPassword:!1,deviceOptions:[],instansiOptions:[],defaultRules:[e=>!!e||"Field ini wajib diisi"]}},methods:{async onSubmit(){try{const e=localStorage.getItem("token");await this.$api.post("pengguna",this.form,{headers:{Authorization:`Bearer ${e}`}}),this.$q.notify({type:"positive",message:"Data pengguna berhasil ditambahkan!",position:"top-right"}),this.resetField(),this.$refs.formRef&&this.$refs.formRef.resetValidation()}catch(e){console.error("Gagal membuat pengguna:",e.response?.data||e.message),this.$q.notify({type:"negative",message:"Gagal membuat pengguna. "+(e.response?.data?.message||""),position:"top-right"})}},resetField(){this.form={uid_rfid:"",nama:"",npm:"",jabatan:"",device_id:null,instansi_id:null,username:"",password:""},this.showPassword=!1},async fetchDeviceOptions(){try{const e=localStorage.getItem("token"),a=await this.$api.get("/device",{headers:{Authorization:`Bearer ${e}`}});this.deviceOptions=a.data}catch(e){console.error("Gagal ambil daftar device:",e)}},async fetchInstansiOptions(){try{const e=localStorage.getItem("token"),a=await this.$api.get("/instansi",{headers:{Authorization:`Bearer ${e}`}});this.instansiOptions=a.data,console.log(this.instansiOptions)}catch(e){console.error("Gagal ambil daftar instansi:",e)}}},mounted(){this.fetchDeviceOptions(),this.fetchInstansiOptions();const e=JSON.parse(localStorage.getItem("user"));this.intervalId=setInterval(this.fetchPengguna,2e3),this.loggedInUserId=e?e.id_user:null}};var y=s(2807),w=s(7716),x=s(3316),v=s(9200),F=s(3954),_=s(9270),V=s(492),z=s(8005),L=s(386),R=s(1693),A=s(8582),U=s.n(A);const I=(0,y.A)(q,[["render",k]]),P=I;U()(q,"components",{QPage:w.A,QCard:x.A,QForm:v.A,QBadge:F.A,QInput:_.A,QIcon:V.A,QSelect:z.A,QSeparator:L.A,QBtn:R.A})}}]);