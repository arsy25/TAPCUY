"use strict";(globalThis["webpackChunkdo_it"]=globalThis["webpackChunkdo_it"]||[]).push([[77],{145:(t,e,a)=>{a.r(e),a.d(e,{default:()=>H});var s=a(1758),l=a(8790);const o={key:0},i={class:"text text-h6 text-weight-bold text-black"},r={class:"row q-gutter-md"},d={class:"row justify-center items-center q-pa-none"},c={class:"col"},n={class:"col"},u={class:"row justify-center items-center"},h={class:"col"},b={class:"row justify-center items-center"},m={class:"col"},p={class:"row q-gutter-md q-mb-md"},g={class:"row q-gutter-md"},k={key:1},v={class:"row"},f={class:"row justify-center items-center"},_={class:"row justify-center items-center"},x={class:"row justify-center items-center"},y={class:"row"};function w(t,e,a,w,F,q){const L=(0,s.g2)("q-icon"),D=(0,s.g2)("q-badge"),A=(0,s.g2)("q-item-label"),C=(0,s.g2)("q-item-section"),T=(0,s.g2)("q-card"),I=(0,s.g2)("absensi-durasi-chart"),W=(0,s.g2)("MapDevices"),S=(0,s.g2)("q-footer"),z=(0,s.g2)("q-page"),$=(0,s.g2)("lottie"),Q=(0,s.g2)("DeviceChart");return(0,s.uX)(),(0,s.CE)(s.FK,null,[e[9]||(e[9]=(0,s.Lk)("title",null,"HyBuddy - Dashboard",-1)),e[10]||(e[10]=(0,s.Lk)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"},null,-1)),t.$q.platform.is.desktop?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(z,{class:"q-pa-md bg-white"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",i," Hello, "+(0,l.v_)(F.user.username),1),e[0]||(e[0]=(0,s.Lk)("div",{class:"text text-h6 q-mb-md text-caption text-grey-5"}," Welcome back to home ",-1))]),(0,s.Lk)("div",r,[(0,s.bF)(T,{class:"q-pa-md no-shadow q-mb-md bg-primary col",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[(0,s.bF)(D,{class:"q-pa-sm bg-white"},{default:(0,s.k6)((()=>[(0,s.bF)(L,{size:"xl",name:"devices",color:"primary"})])),_:1})]),(0,s.Lk)("div",n,[(0,s.bF)(C,{class:"text-white"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"text-weight-bold"},{default:(0,s.k6)((()=>e[1]||(e[1]=[(0,s.eW)("Total Kartu")]))),_:1}),(0,s.bF)(A,{class:"text-weight-bold q-mb-xs text-h3"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(F.userstotal||0),1)])),_:1})])),_:1})])])])),_:1}),(0,s.bF)(T,{class:"q-pa-md no-shadow q-mb-md bg-primary col",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",u,[(0,s.Lk)("div",h,[(0,s.bF)(D,{class:"q-pa-sm bg-white"},{default:(0,s.k6)((()=>[(0,s.bF)(L,{size:"xl",name:"assignment",color:"primary"})])),_:1})]),(0,s.bF)(C,{class:"text-white"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"text-weight-bold"},{default:(0,s.k6)((()=>e[2]||(e[2]=[(0,s.eW)("Total Absensi")]))),_:1}),(0,s.bF)(A,{class:"text-weight-bold q-mb-xs text-h3"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(F.total||0),1)])),_:1})])),_:1})])])),_:1}),(0,s.bF)(T,{class:"q-pa-md no-shadow q-mb-md bg-primary col",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",b,[(0,s.Lk)("div",m,[(0,s.bF)(D,{class:"q-pa-sm bg-white"},{default:(0,s.k6)((()=>[(0,s.bF)(L,{size:"xl",name:"alarm",color:"primary"})])),_:1})]),(0,s.bF)(C,{class:"text-white"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"text-weight-bold"},{default:(0,s.k6)((()=>e[3]||(e[3]=[(0,s.eW)("Total Durasi")]))),_:1}),(0,s.bF)(A,{class:"text-weight-bold q-mb-xs text-h5"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(F.totalabsen||0),1)])),_:1})])),_:1})])])),_:1})]),(0,s.Lk)("div",p,[(0,s.bF)(T,{class:"no-shadow bg-primary col",bordered:""},{default:(0,s.k6)((()=>[(0,s.bF)(I,{"chart-data":F.chartData},null,8,["chart-data"])])),_:1})]),(0,s.Lk)("div",g,[(0,s.bF)(T,{class:"no-shadow bg-primary col",bordered:""},{default:(0,s.k6)((()=>[(0,s.bF)(W)])),_:1})])]),(0,s.bF)(S,{class:"bg-transparent"},{default:(0,s.k6)((()=>e[4]||(e[4]=[(0,s.Lk)("p",{class:"text-primary text-caption flex flex-center"},[(0,s.eW)(" Developed with love by - "),(0,s.Lk)("a",{href:"https://arsy25.github.io/My-Portfolio_Asharan/"}," - Muhammad Ilham Alparsy")],-1)]))),_:1})])),_:1})])):((0,s.uX)(),(0,s.CE)("div",k,[(0,s.bF)(z,{class:(0,l.C4)(["q-pa-md bg-blue-1",t.isDark?"bg-dark text-white":"bg-blue-1 text-primary"])},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.bF)(T,{class:"q-pa-md no-shadow q-mb-md cardd",bordered:""},{default:(0,s.k6)((()=>e[5]||(e[5]=[(0,s.Lk)("p",{class:"text-weight-bold texttitle text text-h6 text-black"}," Home page ",-1),(0,s.Lk)("p",{class:"text-weight-bold text-caption text-grey-5 text"}," Water is the driving force of all nature ",-1)]))),_:1}),(0,s.Lk)("div",v,[(0,s.bF)(T,{class:"q-pa-md no-shadow q-mb-md bg-white cardd col-12",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",f,[(0,s.bF)(C,{class:"text-black q-mt-md"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"text-caption"},{default:(0,s.k6)((()=>e[6]||(e[6]=[(0,s.eW)("Total Users")]))),_:1}),(0,s.bF)(A,{class:"text-weight-bold q-mb-xs text-h3"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(F.userstotal||0),1)])),_:1})])),_:1}),(0,s.bF)($,{style:{width:"110px"},options:t.defaultOptions2},null,8,["options"])])])),_:1}),(0,s.bF)(T,{class:"q-pa-md no-shadow q-mb-md bg-white cardd col-12",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",_,[(0,s.bF)(C,{class:"text-black"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"text-caption"},{default:(0,s.k6)((()=>e[7]||(e[7]=[(0,s.eW)("Total Devices")]))),_:1}),(0,s.bF)(A,{class:"text-weight-bold q-mb-xs text-h3"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(F.devicetotal||0),1)])),_:1})])),_:1}),(0,s.bF)($,{style:{width:"120px"},options:t.defaultOptions},null,8,["options"])])])),_:1}),(0,s.bF)(T,{class:"q-pa-md no-shadow q-mb-md bg-white cardd col-12",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",x,[(0,s.bF)(C,{class:"text-black"},{default:(0,s.k6)((()=>[(0,s.bF)(A,{class:"text-caption"},{default:(0,s.k6)((()=>e[8]||(e[8]=[(0,s.eW)("Total logs")]))),_:1}),(0,s.bF)(A,{class:"text-weight-bold q-mb-xs text-h3"},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(t.total_tasks||0),1)])),_:1})])),_:1}),(0,s.bF)($,{style:{width:"120px"},options:t.defaultOptions},null,8,["options"])])])),_:1})]),(0,s.Lk)("div",y,[(0,s.bF)(T,{class:"q-pa-sm no-shadow bg-white cardd col-12",bordered:""},{default:(0,s.k6)((()=>[F.deviceTypeData.length?((0,s.uX)(),(0,s.Wv)(Q,{key:0,chartData:F.deviceTypeData},null,8,["chartData"])):(0,s.Q3)("",!0)])),_:1})])])])),_:1},8,["class"])]))],64)}a(310),a(6724);var F=a(6707),q=a(4404);const L={style:{height:"480px"}};function D(t,e,a,o,i,r){const d=(0,s.g2)("l-tile-layer"),c=(0,s.g2)("l-popup"),n=(0,s.g2)("l-marker"),u=(0,s.g2)("l-map");return(0,s.uX)(),(0,s.CE)("div",L,[(0,s.bF)(u,{zoom:i.zoom,center:i.mapCenter,style:{height:"100%",width:"100%"}},{default:(0,s.k6)((()=>[(0,s.bF)(d,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"Â© OpenStreetMap contributors"}),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.devices,(t=>((0,s.uX)(),(0,s.Wv)(n,{key:t.id,"lat-lng":[t.latitude,t.longitude],onClick:e=>r.selectDevice(t)},{default:(0,s.k6)((()=>[(0,s.bF)(c,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("strong",null,(0,l.v_)(t.nama_device),1)]),(0,s.Lk)("div",null,"UID: "+(0,l.v_)(t.uid_device),1),(0,s.Lk)("div",null,"Latitude: "+(0,l.v_)(t.latitude),1),(0,s.Lk)("div",null,"Longitude: "+(0,l.v_)(t.longitude),1)])),_:2},1024)])),_:2},1032,["lat-lng","onClick"])))),128))])),_:1},8,["zoom","center"])])}a(5962);var A=a(7024);const C={name:"DeviceMap",components:{LMap:A.Do,LTileLayer:A.a,LMarker:A.li,LPopup:A.nA},data(){return{zoom:13,mapCenter:[-6.2,106.8167],devices:[],selectedDevice:null}},mounted(){this.fetchDevices()},methods:{async fetchDevices(){try{const t=localStorage.getItem("token"),e=await this.$api.get("/device",{headers:{Authorization:`Bearer ${t}`}});this.devices=e.data.filter((t=>null!=t.latitude&&null!=t.longitude)),this.devices.length>0&&(this.mapCenter=[this.devices[0].latitude,this.devices[0].longitude])}catch(t){console.error("Gagal mengambil data device:",t)}},selectDevice(t){this.selectedDevice=t}}};var T=a(2807),I=a(6868),W=a(8582),S=a.n(W);const z=(0,T.A)(C,[["render",D],["__scopeId","data-v-0afca9ed"]]),$=z;S()(C,"components",{QBanner:I.A});const Q={components:{DeviceChart:F.A,AbsensiDurasiChart:q.A,MapDevices:$},data(){return{deviceTypeData:[],chartData:[],user:JSON.parse(localStorage.getItem("user"))||{},userstotal:null,totalabsen:null,total:null,devicetotal:null}},methods:{async fetchTotalUsers(){try{const t=localStorage.getItem("token"),e=await this.$api.get("pengguna/count/",{headers:{Authorization:`Bearer ${t}`}});this.userstotal=e.data.total}catch(t){console.error("Error fetching total users:",t)}},async fetchTotalAbsen(){try{const t=localStorage.getItem("token"),e=await this.$api.get("absen/stats/",{headers:{Authorization:`Bearer ${t}`}});this.totalabsen=e.data.total_durasi_format,this.total=e.data.total_absensi,console.log(e.data.total_durasi_format)}catch(t){console.error("Error fetching total absen:",t)}},async fetchDeviceTypeCount(){try{const t=localStorage.getItem("token"),e=await this.$api.get("device/count-by-type",{headers:{Authorization:`Bearer ${t}`}});this.deviceTypeData=e.data.data.map((t=>({type:t.type,total:parseInt(t.total)})))}catch(t){console.error("Gagal ambil data chart:",t)}},async fetchAbsensiUserDurasi(){try{const t=localStorage.getItem("token"),e=await this.$api.get("/absen/total_durasi_pengguna",{headers:{Authorization:`Bearer ${t}`}});this.chartData=(e.data||[]).map((t=>({nama:t.nama,total_durasi_menit:parseInt(t.total_durasi_menit,10)||0}))),console.log(this.chartData)}catch(t){this.$q.notify({type:"negative",message:"Gagal ambil data absensi"})}},handleAnimation:function(t){this.anim=t},stop:function(){this.anim.stop()},play:function(){this.anim.play()},pause:function(){this.anim.pause()},onSpeedChange:function(){this.anim.setSpeed(this.animationSpeed)}},mounted(){this.fetchTotalUsers(),this.fetchTotalAbsen(),this.fetchAbsensiUserDurasi(),this.fetchDeviceTypeCount();const t=JSON.parse(localStorage.getItem("user"));this.loggedInUserId=t?t.id_user:null},computed:{}};var B=a(7716),M=a(3316),j=a(3954),E=a(492),U=a(5173),X=a(3796),O=a(7092);const G=(0,T.A)(Q,[["render",w]]),H=G;S()(Q,"components",{QPage:B.A,QCard:M.A,QBadge:j.A,QIcon:E.A,QItemSection:U.A,QItemLabel:X.A,QFooter:O.A})}}]);