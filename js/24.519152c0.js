"use strict";(globalThis["webpackChunkdo_it"]=globalThis["webpackChunkdo_it"]||[]).push([[24],{804:(t,e,a)=>{a.r(e),a.d(e,{default:()=>B});var i=a(1758),l=a(8790);const s={key:0},n={class:"text text-h6 text-weight-bold text-black"},o={key:1},r={class:"text text-h6 text-weight-bold text-black"},d={class:"row q-gutter-md flex flex-center"},u={class:"row items-center"},c={class:"col-auto"},g={class:"col text-white q-ml-md"},b={class:"text-h6 text-weight-bold"};function m(t,e,a,m,k,h){const p=(0,i.g2)("q-footer"),v=(0,i.g2)("q-page"),f=(0,i.g2)("q-icon"),x=(0,i.g2)("q-avatar"),y=(0,i.g2)("q-separator"),L=(0,i.g2)("q-btn"),A=(0,i.g2)("q-banner"),q=(0,i.g2)("q-card"),_=(0,i.g2)("q-card-section"),w=(0,i.g2)("q-input"),I=(0,i.g2)("q-card-actions"),F=(0,i.g2)("q-dialog"),K=(0,i.gN)("close-popup");return(0,i.uX)(),(0,i.CE)(i.FK,null,[e[13]||(e[13]=(0,i.Lk)("title",null,"HyBuddy - Dashboard",-1)),e[14]||(e[14]=(0,i.Lk)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"},null,-1)),t.$q.platform.is.desktop?((0,i.uX)(),(0,i.CE)("div",s,[(0,i.bF)(v,{class:"q-pa-md bg-white"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",null,[(0,i.Lk)("div",n," Hello, "+(0,l.v_)(k.user.username),1),e[3]||(e[3]=(0,i.Lk)("div",{class:"text text-h6 q-mb-md text-caption text-grey-5"}," Welcome back to home ",-1))])]),(0,i.bF)(p,{class:"bg-transparent"},{default:(0,i.k6)((()=>e[4]||(e[4]=[(0,i.Lk)("p",{class:"text-primary text-caption flex flex-center"},[(0,i.eW)(" Developed with love by - "),(0,i.Lk)("a",{href:"https://arsy25.github.io/My-Portfolio_Asharan/"}," - Muhammad Ilham Alparsy")],-1)]))),_:1})])),_:1})])):((0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(v,{class:"q-pa-md bg-white"},{default:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",null,[(0,i.Lk)("div",r," Hello, "+(0,l.v_)(k.user.username),1),e[5]||(e[5]=(0,i.Lk)("div",{class:"text text-h6 q-mb-md text-caption text-grey-5"}," Welcome back to home ",-1))]),(0,i.Lk)("div",d,[(0,i.bF)(q,{class:"q-pa-md no-shadow q-mb-md bg-primary col-12",bordered:""},{default:(0,i.k6)((()=>[(0,i.Lk)("div",u,[(0,i.Lk)("div",c,[(0,i.bF)(x,{size:"56px",class:"bg-white"},{default:(0,i.k6)((()=>[(0,i.bF)(f,{name:"access_time",color:"primary",size:"32px"})])),_:1})]),(0,i.Lk)("div",g,[e[9]||(e[9]=(0,i.Lk)("div",{class:"text-subtitle2"},"Status Absensi Hari Ini",-1)),(0,i.Lk)("div",b," Total durasi: "+(0,l.v_)(k.absensi.durasi||"-")+" menit ",1),(0,i.bF)(y,{dark:"",class:"q-my-sm"}),(0,i.Lk)("div",null,[e[6]||(e[6]=(0,i.eW)(" Status: ")),(0,i.Lk)("b",null,(0,l.v_)(k.absensi.status||"-"),1)]),(0,i.Lk)("div",null,[e[7]||(e[7]=(0,i.eW)(" Waktu Masuk: ")),(0,i.Lk)("strong",null,(0,l.v_)(h.formatDate(k.absensi.masuk)||"-"),1)]),(0,i.Lk)("div",null,[e[8]||(e[8]=(0,i.eW)(" Waktu Keluar: ")),(0,i.Lk)("strong",null,(0,l.v_)(h.formatDate(k.absensi.keluar)||"-"),1)]),e[10]||(e[10]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("div",null,"Kegiatan: "+(0,l.v_)(k.absensi.kegiatan||"-"),1)])]),(0,i.bF)(L,{label:"Isi Kegiatan Hari Ini",class:"q-mt-md full-width text-primary bg-white text-bold",disable:"valid"!==k.absensi.status,onClick:e[0]||(e[0]=t=>k.dialogKegiatan=!0),icon:"edit_note"},null,8,["disable"]),"valid"!==k.absensi.status?((0,i.uX)(),(0,i.Wv)(A,{key:0,dense:"",class:"q-mt-sm bg-red-2 text-red-10"},{avatar:(0,i.k6)((()=>[(0,i.bF)(f,{name:"info",color:"red-10"})])),default:(0,i.k6)((()=>[e[11]||(e[11]=(0,i.Lk)("div",null,[(0,i.Lk)("b",null,"Note:"),(0,i.eW)(" Kamu dapat mengisi kegiatan jika absenmu sudah valid. ")],-1))])),_:1})):(0,i.Q3)("",!0)])),_:1})]),(0,i.bF)(F,{modelValue:k.dialogKegiatan,"onUpdate:modelValue":e[2]||(e[2]=t=>k.dialogKegiatan=t),persistent:""},{default:(0,i.k6)((()=>[(0,i.bF)(q,{style:{"min-width":"350px"}},{default:(0,i.k6)((()=>[(0,i.bF)(_,null,{default:(0,i.k6)((()=>e[12]||(e[12]=[(0,i.Lk)("div",{class:"text-h6"},"Input Kegiatan Hari Ini",-1)]))),_:1}),(0,i.bF)(_,null,{default:(0,i.k6)((()=>[(0,i.bF)(w,{modelValue:k.form.kegiatan,"onUpdate:modelValue":e[1]||(e[1]=t=>k.form.kegiatan=t),type:"textarea",label:"Kegiatan",autogrow:"",maxlength:"300"},null,8,["modelValue"])])),_:1}),(0,i.bF)(I,{align:"right"},{default:(0,i.k6)((()=>[(0,i.bo)((0,i.bF)(L,{flat:"",label:"Batal",color:"primary"},null,512),[[K]]),(0,i.bF)(L,{flat:"",label:"Simpan",color:"primary",onClick:h.submitKegiatan},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})]))],64)}a(6707),a(4404);const k={components:{},data(){return{dialogKegiatan:!1,form:{kegiatan:""},deviceTypeData:[],absensi:{},chartData:[],user:JSON.parse(localStorage.getItem("user"))||{},userstotal:null,totalabsen:null,total:null,devicetotal:null,intervalId:null}},methods:{async submitKegiatan(){if(this.form.kegiatan)try{const t=localStorage.getItem("token"),e=this.absensi?.id;await this.$api.put(`/absen/${e}`,{kegiatan:this.form.kegiatan},{headers:{Authorization:`Bearer ${t}`}}),this.$q.notify({type:"positive",message:"Kegiatan berhasil disimpan!"}),this.dialogKegiatan=!1,this.form.kegiatan="",await this.fetchAbsensi()}catch(t){this.$q.notify({type:"negative",message:"Gagal simpan kegiatan"}),console.error(t)}else this.$q.notify({type:"negative",message:"Kegiatan tidak boleh kosong!"})},async fetchAbsensi(){try{const t=localStorage.getItem("token"),e=await this.$api.get("/absen/status",{headers:{Authorization:`Bearer ${t}`}});this.absensi=e.data,console.log(this.absensi)}catch(t){console.error("Error fetch absensi:",t)}},formatDate(t){if(!t)return"";let e="string"===typeof t?new Date(t):t;return e.toLocaleString("id-ID",{timeZone:"Asia/Jakarta",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\//g,"-")}},mounted(){this.fetchAbsensi();const t=JSON.parse(localStorage.getItem("user"));this.intervalId=setInterval(this.fetchAbsensi,2e3),this.loggedInUserId=t?t.id_user:null}};var h=a(2807),p=a(7716),v=a(3316),f=a(3954),x=a(492),y=a(5173),L=a(3796),A=a(7092),q=a(3952),_=a(386),w=a(1693),I=a(6868),F=a(2156),K=a(4189),Q=a(9270),S=a(2669),C=a(8672),D=a(8582),W=a.n(D);const $=(0,h.A)(k,[["render",m]]),B=$;W()(k,"components",{QPage:p.A,QCard:v.A,QBadge:f.A,QIcon:x.A,QItemSection:y.A,QItemLabel:L.A,QFooter:A.A,QAvatar:q.A,QSeparator:_.A,QBtn:w.A,QBanner:I.A,QDialog:F.A,QCardSection:K.A,QInput:Q.A,QCardActions:S.A}),W()(k,"directives",{ClosePopup:C.A})}}]);