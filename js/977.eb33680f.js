"use strict";(globalThis["webpackChunkdo_it"]=globalThis["webpackChunkdo_it"]||[]).push([[977],{9373:(e,t,a)=>{a.r(t),a.d(t,{default:()=>B});var s=a(1758),l=a(8790);const i={key:0},n={class:"text text-h6 text-weight-bold text-black"},o={key:1},r={class:"text text-h6 text-weight-bold text-black"},d={class:"row q-gutter-md flex flex-center"},u={class:"row items-center"},c={class:"col-auto"},g={class:"col text-white q-ml-md"},b={class:"text-h6 text-weight-bold"};function m(e,t,a,m,k,h){const p=(0,s.g2)("q-footer"),v=(0,s.g2)("q-page"),f=(0,s.g2)("q-icon"),x=(0,s.g2)("q-avatar"),y=(0,s.g2)("q-separator"),A=(0,s.g2)("q-btn"),L=(0,s.g2)("q-banner"),q=(0,s.g2)("q-card"),_=(0,s.g2)("q-card-section"),w=(0,s.g2)("q-input"),I=(0,s.g2)("q-card-actions"),F=(0,s.g2)("q-dialog"),K=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[t[10]||(t[10]=(0,s.Lk)("title",null,"HyBuddy - Dashboard",-1)),t[11]||(t[11]=(0,s.Lk)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"},null,-1)),e.$q.platform.is.desktop?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(v,{class:"q-pa-md bg-white"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",n," Hello, "+(0,l.v_)(k.user.username),1),t[3]||(t[3]=(0,s.Lk)("div",{class:"text text-h6 q-mb-md text-caption text-grey-5"}," Welcome back to home ",-1))])]),(0,s.bF)(p,{class:"bg-transparent"},{default:(0,s.k6)((()=>t[4]||(t[4]=[(0,s.Lk)("p",{class:"text-primary text-caption flex flex-center"},[(0,s.eW)(" Developed with love by - "),(0,s.Lk)("a",{href:"https://arsy25.github.io/My-Portfolio_Asharan/"}," - Muhammad Ilham Alparsy")],-1)]))),_:1})])),_:1})])):((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(v,{class:"q-pa-md bg-white"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",r," Hello, "+(0,l.v_)(k.user.username),1),t[5]||(t[5]=(0,s.Lk)("div",{class:"text text-h6 q-mb-md text-caption text-grey-5"}," Welcome back to home ",-1))]),(0,s.Lk)("div",d,[(0,s.bF)(q,{class:"q-pa-md no-shadow q-mb-md bg-primary col-12",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",u,[(0,s.Lk)("div",c,[(0,s.bF)(x,{size:"56px",class:"bg-white"},{default:(0,s.k6)((()=>[(0,s.bF)(f,{name:"access_time",color:"primary",size:"32px"})])),_:1})]),(0,s.Lk)("div",g,[t[7]||(t[7]=(0,s.Lk)("div",{class:"text-subtitle2"},"Status Absensi Hari Ini",-1)),(0,s.Lk)("div",b," Total durasi: "+(0,l.v_)(k.absensi.durasi||"-")+" menit ",1),(0,s.bF)(y,{dark:"",class:"q-my-sm"}),(0,s.Lk)("div",null,[t[6]||(t[6]=(0,s.eW)(" Status: ")),(0,s.Lk)("b",null,(0,l.v_)(k.absensi.status||"-"),1)]),(0,s.Lk)("div",null,"Waktu Masuk: "+(0,l.v_)(h.formatDate(k.absensi.masuk)||"-"),1),(0,s.Lk)("div",null,"Waktu Keluar: "+(0,l.v_)(h.formatDate(k.absensi.keluar)||"-"),1),(0,s.Lk)("div",null,"Mac Address: "+(0,l.v_)(k.absensi.mac_address||"-"),1),(0,s.Lk)("div",null,"Kegiatan: "+(0,l.v_)(k.absensi.kegiatan||"-"),1)])]),(0,s.bF)(A,{label:"Isi Kegiatan Hari Ini",class:"q-mt-md full-width text-primary bg-white text-bold",disable:"valid"!==k.absensi.status,onClick:t[0]||(t[0]=e=>k.dialogKegiatan=!0),icon:"edit_note"},null,8,["disable"]),"valid"!==k.absensi.status?((0,s.uX)(),(0,s.Wv)(L,{key:0,dense:"",class:"q-mt-sm bg-red-2 text-red-10"},{avatar:(0,s.k6)((()=>[(0,s.bF)(f,{name:"info",color:"red-10"})])),default:(0,s.k6)((()=>[t[8]||(t[8]=(0,s.Lk)("div",null,[(0,s.Lk)("b",null,"Note:"),(0,s.eW)(" Kamu dapat mengisi kegiatan jika absenmu sudah valid. ")],-1))])),_:1})):(0,s.Q3)("",!0)])),_:1})]),(0,s.bF)(F,{modelValue:k.dialogKegiatan,"onUpdate:modelValue":t[2]||(t[2]=e=>k.dialogKegiatan=e),persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(q,{style:{"min-width":"350px"}},{default:(0,s.k6)((()=>[(0,s.bF)(_,null,{default:(0,s.k6)((()=>t[9]||(t[9]=[(0,s.Lk)("div",{class:"text-h6"},"Input Kegiatan Hari Ini",-1)]))),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)((()=>[(0,s.bF)(w,{modelValue:k.form.kegiatan,"onUpdate:modelValue":t[1]||(t[1]=e=>k.form.kegiatan=e),type:"textarea",label:"Kegiatan",autogrow:"",maxlength:"300"},null,8,["modelValue"])])),_:1}),(0,s.bF)(I,{align:"right"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(A,{flat:"",label:"Batal",color:"primary"},null,512),[[K]]),(0,s.bF)(A,{flat:"",label:"Simpan",color:"primary",onClick:h.submitKegiatan},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})]))],64)}a(6707),a(4404);const k={components:{},data(){return{dialogKegiatan:!1,form:{kegiatan:""},deviceTypeData:[],absensi:{},chartData:[],user:JSON.parse(localStorage.getItem("user"))||{},userstotal:null,totalabsen:null,total:null,devicetotal:null,intervalId:null}},methods:{async submitKegiatan(){if(this.form.kegiatan)try{const e=localStorage.getItem("token");await this.$api.put("/absen/kegiatan",{kegiatan:this.form.kegiatan},{headers:{Authorization:`Bearer ${e}`}}),this.$q.notify({type:"positive",message:"Kegiatan berhasil disimpan!"}),this.dialogKegiatan=!1,this.form.kegiatan="",await this.fetchAbsensi()}catch(e){this.$q.notify({type:"negative",message:"Gagal simpan kegiatan"}),console.error(e)}else this.$q.notify({type:"negative",message:"Kegiatan tidak boleh kosong!"})},async fetchAbsensi(){try{const e=localStorage.getItem("token"),t=await this.$api.get("/absen/status",{headers:{Authorization:`Bearer ${e}`}});this.absensi=t.data,console.log(this.absensi)}catch(e){console.error("Error fetch absensi:",e)}},formatDate(e){return e?("string"!==typeof e&&(e=e.toISOString()),e.replace(".000Z","").replace("T"," ")):""}},mounted(){this.fetchAbsensi();const e=JSON.parse(localStorage.getItem("user"));this.intervalId=setInterval(this.fetchAbsensi,2e3),this.loggedInUserId=e?e.id_user:null}};var h=a(2807),p=a(7716),v=a(3316),f=a(3954),x=a(492),y=a(5173),A=a(3796),L=a(7092),q=a(3952),_=a(386),w=a(1693),I=a(6868),F=a(2156),K=a(4189),Q=a(9270),S=a(2669),C=a(8672),D=a(8582),W=a.n(D);const $=(0,h.A)(k,[["render",m]]),B=$;W()(k,"components",{QPage:p.A,QCard:v.A,QBadge:f.A,QIcon:x.A,QItemSection:y.A,QItemLabel:A.A,QFooter:L.A,QAvatar:q.A,QSeparator:_.A,QBtn:w.A,QBanner:I.A,QDialog:F.A,QCardSection:K.A,QInput:Q.A,QCardActions:S.A}),W()(k,"directives",{ClosePopup:C.A})}}]);