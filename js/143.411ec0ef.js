"use strict";(globalThis["webpackChunkdo_it"]=globalThis["webpackChunkdo_it"]||[]).push([[143],{7144:(t,a,e)=>{e.r(a),e.d(a,{default:()=>$});var s=e(1758),i=e(8790);const l={key:0},n={class:"text text-h6 text-weight-bold text-black"},o={key:1},r={class:"text text-h6 text-weight-bold text-black"},c={class:"row q-gutter-md flex flex-center"},d={class:"row justify-center items-center q-pa-none"},u={class:"col"};function h(t,a,e,h,g,m){const b=(0,s.g2)("q-footer"),p=(0,s.g2)("q-page"),k=(0,s.g2)("q-item-label"),f=(0,s.g2)("q-item-section"),y=(0,s.g2)("q-btn"),_=(0,s.g2)("q-card"),v=(0,s.g2)("q-card-section"),A=(0,s.g2)("q-input"),x=(0,s.g2)("q-card-actions"),q=(0,s.g2)("q-dialog"),w=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[a[8]||(a[8]=(0,s.Lk)("title",null,"HyBuddy - Dashboard",-1)),a[9]||(a[9]=(0,s.Lk)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"},null,-1)),t.$q.platform.is.desktop?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.bF)(p,{class:"q-pa-md bg-white"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",n," Hello, "+(0,i.v_)(g.user.username),1),a[3]||(a[3]=(0,s.Lk)("div",{class:"text text-h6 q-mb-md text-caption text-grey-5"}," Welcome back to home ",-1))])]),(0,s.bF)(b,{class:"bg-transparent"},{default:(0,s.k6)((()=>a[4]||(a[4]=[(0,s.Lk)("p",{class:"text-primary text-caption flex flex-center"},[(0,s.eW)(" Developed with love by - "),(0,s.Lk)("a",{href:"https://arsy25.github.io/My-Portfolio_Asharan/"}," - Muhammad Ilham Alparsy")],-1)]))),_:1})])),_:1})])):((0,s.uX)(),(0,s.CE)("div",o,[(0,s.bF)(p,{class:"q-pa-md bg-white"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",null,[(0,s.Lk)("div",null,[(0,s.Lk)("div",r," Hello, "+(0,i.v_)(g.user.username),1),a[5]||(a[5]=(0,s.Lk)("div",{class:"text text-h6 q-mb-md text-caption text-grey-5"}," Welcome back to home ",-1))]),(0,s.Lk)("div",c,[(0,s.bF)(_,{class:"q-pa-md no-shadow q-mb-md bg-primary col-12",bordered:""},{default:(0,s.k6)((()=>[(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[(0,s.bF)(f,{class:"text-white"},{default:(0,s.k6)((()=>[(0,s.bF)(k,{class:"text-weight-bold"},{default:(0,s.k6)((()=>a[6]||(a[6]=[(0,s.eW)("Status Absensi")]))),_:1}),(0,s.bF)(k,{class:"text-weight-bold q-mb-xs text-h6"},{default:(0,s.k6)((()=>[(0,s.eW)(" ID: "+(0,i.v_)(g.absensi.id||"-"),1)])),_:1}),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("Status: "+(0,i.v_)(g.absensi.status||"-"),1)])),_:1}),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("Waktu Masuk: "+(0,i.v_)(m.formatDate(g.absensi.masuk)||"-"),1)])),_:1}),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("Waktu Keluar: "+(0,i.v_)(m.formatDate(g.absensi.keluar)||"-"),1)])),_:1}),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("Kegiatan: "+(0,i.v_)(g.absensi.kegiatan||"-"),1)])),_:1}),(0,s.bF)(k,null,{default:(0,s.k6)((()=>[(0,s.eW)("Mac Address: "+(0,i.v_)(g.absensi.mac_address||"-"),1)])),_:1})])),_:1})])]),"valid"===g.absensi.status?((0,s.uX)(),(0,s.Wv)(y,{key:0,label:"Isi Kegiatan Hari Ini",flat:"",class:"q-mt-sm full-width bg-white text-primary",onClick:a[0]||(a[0]=t=>g.dialogKegiatan=!0)})):(0,s.Q3)("",!0)])),_:1})]),(0,s.bF)(q,{modelValue:g.dialogKegiatan,"onUpdate:modelValue":a[2]||(a[2]=t=>g.dialogKegiatan=t),persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(_,{style:{"min-width":"350px"}},{default:(0,s.k6)((()=>[(0,s.bF)(v,null,{default:(0,s.k6)((()=>a[7]||(a[7]=[(0,s.Lk)("div",{class:"text-h6"},"Input Kegiatan Hari Ini",-1)]))),_:1}),(0,s.bF)(v,null,{default:(0,s.k6)((()=>[(0,s.bF)(A,{modelValue:g.form.kegiatan,"onUpdate:modelValue":a[1]||(a[1]=t=>g.form.kegiatan=t),type:"textarea",label:"Kegiatan",autogrow:"",maxlength:"300"},null,8,["modelValue"])])),_:1}),(0,s.bF)(x,{align:"right"},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.bF)(y,{flat:"",label:"Batal",color:"primary"},null,512),[[w]]),(0,s.bF)(y,{flat:"",label:"Simpan",color:"primary",onClick:m.submitKegiatan},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})]))],64)}e(310),e(6724),e(6707),e(4404);const g={components:{},data(){return{dialogKegiatan:!1,form:{kegiatan:""},deviceTypeData:[],absensi:{},chartData:[],user:JSON.parse(localStorage.getItem("user"))||{},userstotal:null,totalabsen:null,total:null,devicetotal:null}},methods:{async fetchTotalUsers(){try{const t=localStorage.getItem("token"),a=await this.$api.get("pengguna/count/",{headers:{Authorization:`Bearer ${t}`}});this.userstotal=a.data.total}catch(t){console.error("Error fetching total users:",t)}},async fetchTotalAbsen(){try{const t=localStorage.getItem("token"),a=await this.$api.get("absen/stats/",{headers:{Authorization:`Bearer ${t}`}});this.totalabsen=a.data.total_durasi_format,this.total=a.data.total_absensi,console.log(a.data.total_durasi_format)}catch(t){console.error("Error fetching total absen:",t)}},async submitKegiatan(){if(this.form.kegiatan)try{const t=localStorage.getItem("token");await this.$api.put("/absen/kegiatan",{kegiatan:this.form.kegiatan},{headers:{Authorization:`Bearer ${t}`}}),this.$q.notify({type:"positive",message:"Kegiatan berhasil disimpan!"}),this.dialogKegiatan=!1,this.form.kegiatan="",await this.fetchAbsensi()}catch(t){this.$q.notify({type:"negative",message:"Gagal simpan kegiatan"}),console.error(t)}else this.$q.notify({type:"negative",message:"Kegiatan tidak boleh kosong!"})},async fetchDeviceTypeCount(){try{const t=localStorage.getItem("token"),a=await this.$api.get("device/count-by-type",{headers:{Authorization:`Bearer ${t}`}});this.deviceTypeData=a.data.data.map((t=>({type:t.type,total:parseInt(t.total)})))}catch(t){console.error("Gagal ambil data chart:",t)}},async fetchAbsensi(){try{const t=localStorage.getItem("token"),a=await this.$api.get("/absen/status",{headers:{Authorization:`Bearer ${t}`}});this.absensi=a.data,console.log(this.absensi)}catch(t){console.error("Error fetch absensi:",t)}},formatDate(t){return t?new Date(t).toLocaleString():""},async fetchAbsensiUserDurasi(){try{const t=localStorage.getItem("token"),a=await this.$api.get("/absen/total_durasi_pengguna",{headers:{Authorization:`Bearer ${t}`}});this.chartData=(a.data||[]).map((t=>({nama:t.nama,total_durasi_menit:parseInt(t.total_durasi_menit,10)||0}))),console.log(this.chartData)}catch(t){this.$q.notify({type:"negative",message:"Gagal ambil data absensi"})}},handleAnimation:function(t){this.anim=t},stop:function(){this.anim.stop()},play:function(){this.anim.play()},pause:function(){this.anim.pause()},onSpeedChange:function(){this.anim.setSpeed(this.animationSpeed)}},mounted(){this.fetchTotalUsers(),this.fetchTotalAbsen(),this.fetchAbsensi(),this.fetchAbsensiUserDurasi(),this.fetchDeviceTypeCount();const t=JSON.parse(localStorage.getItem("user"));this.loggedInUserId=t?t.id_user:null},computed:{}};var m=e(2807),b=e(7716),p=e(3316),k=e(3954),f=e(492),y=e(5173),_=e(3796),v=e(7092),A=e(1693),x=e(2156),q=e(4189),w=e(9270),F=e(2669),I=e(8672),S=e(8582),L=e.n(S);const D=(0,m.A)(g,[["render",h]]),$=D;L()(g,"components",{QPage:b.A,QCard:p.A,QBadge:k.A,QIcon:f.A,QItemSection:y.A,QItemLabel:_.A,QFooter:v.A,QBtn:A.A,QDialog:x.A,QCardSection:q.A,QInput:w.A,QCardActions:F.A}),L()(g,"directives",{ClosePopup:I.A})}}]);